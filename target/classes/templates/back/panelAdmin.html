<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang=""
      xmlns:th="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Inicio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="../estilos/styles.css" rel="stylesheet">

</head>
<body>

<header th:replace="layout/plantilla :: header"></header>

<nav class="mb-4">
    <a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/agregar}" class="btn btn-primary">[[#{noticia.crear}]]</a>
    <a th:href="@{/}" class="btn btn-primary">[[#{accion.regresar}]]</a>
    <br/>
</nav>
<div th:if="${noticias != null and !noticias.isEmpty()}">
    <table class="table table-hover">
        <tr>
            <th>[[#{noticia.alta}]]</th>
            <th>[[#{noticia.titulo}]]</th>
            <th>[[#{noticia.resumen}]]</th>
            <th>[[#{noticia.cuerpo}]]</th>
            <th sec:authorize="hasRole('ROLE_ADMIN')">[[#{accion.editar}]]</th>
            <th sec:authorize="hasRole('ROLE_ADMIN')">[[#{accion.eliminar}]]</th>
        </tr>

        <tr th:each="noticia: ${noticias}">
            <td th:text="${noticia.alta}">Mostrar fecha</td>
            <td th:text="${noticia.titulo}">Mostrar Noticia</td>
            <td th:text="${noticia.resumen}">Mostrar resumen</td>
            <td th:text="${noticia.cuerpo}">Mostrar Cuerpo</td>
            <!-- <td><a th:href="@{/editar/} + ${noticia.idNoticia}" class="btn btn-secondary">[[#{accion.editar}]]</a></td>
            pasado a QUERY PARAM -->
            <td sec:authorize="hasRole('ROLE_ADMIN')"><a th:href="@{/editar(idNoticia=${noticia.idNoticia})}"
                                                         class="btn btn-secondary">[[#{accion.editar}]]</a></td>
            <td sec:authorize="hasRole('ROLE_ADMIN')"><a th:href="@{/eliminar(idNoticia=${noticia.idNoticia})}"
                                                         class="btn btn-danger">[[#{accion.eliminar}]]</a></td>

        </tr>
    </table>
</div>

<div th:if="${noticias == null or noticias.isempty()}">
    [[#{noticia.lista_vacia}]]
</div>


<footer th:replace="layout/plantilla :: footer"></footer>


<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>
</html>
